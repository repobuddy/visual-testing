var We=Object.defineProperty;var De=(e,t,n)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var K=(e,t,n)=>De(e,typeof t!="symbol"?t+"":t,n);var qe={reset:[0,0],bold:[1,22,"\x1B[22m\x1B[1m"],dim:[2,22,"\x1B[22m\x1B[2m"],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]},Ve=Object.entries(qe);function re(e){return String(e)}re.open="";re.close="";function He(e=!1){let t=typeof process<"u"?process:void 0,n=(t==null?void 0:t.env)||{},i=(t==null?void 0:t.argv)||[];return!("NO_COLOR"in n||i.includes("--no-color"))&&("FORCE_COLOR"in n||i.includes("--color")||(t==null?void 0:t.platform)==="win32"||e&&n.TERM!=="dumb"||"CI"in n)||typeof window<"u"&&!!window.chrome}function Ke(e=!1){let t=He(e),n=(s,c,l,u)=>{let h="",g=0;do h+=s.substring(g,u)+l,g=u+c.length,u=s.indexOf(c,g);while(~u);return h+s.substring(g)},i=(s,c,l=s)=>{let u=h=>{let g=String(h),d=g.indexOf(c,s.length);return~d?s+n(g,c,l,d)+c:s+g+c};return u.open=s,u.close=c,u},r={isColorSupported:t},o=s=>`\x1B[${s}m`;for(let[s,c]of Ve)r[s]=t?i(o(c[0]),o(c[1]),c[2]):re;return r}Ke();const ae={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},Ue={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},B="…";function Ge(e,t){const n=ae[Ue[t]]||ae[t]||"";return n?`\x1B[${n[0]}m${String(e)}\x1B[${n[1]}m`:String(e)}function Ze({showHidden:e=!1,depth:t=2,colors:n=!1,customInspect:i=!0,showProxy:r=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:c=[],truncate:l=1/0,stylize:u=String}={},h){const g={showHidden:!!e,depth:Number(t),colors:!!n,customInspect:!!i,showProxy:!!r,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(l),seen:c,inspect:h,stylize:u};return g.colors&&(g.stylize=Ge),g}function Ye(e){return e>="\uD800"&&e<="\uDBFF"}function j(e,t,n=B){e=String(e);const i=n.length,r=e.length;if(i>t&&r>i)return n;if(r>t&&r>i){let o=t-i;return o>0&&Ye(e[o-1])&&(o=o-1),`${e.slice(0,o)}${n}`}return e}function k(e,t,n,i=", "){n=n||t.inspect;const r=e.length;if(r===0)return"";const o=t.truncate;let s="",c="",l="";for(let u=0;u<r;u+=1){const h=u+1===e.length,g=u+2===e.length;l=`${B}(${e.length-u})`;const d=e[u];t.truncate=o-s.length-(h?0:i.length);const S=c||n(d,t)+(h?"":i),m=s.length+S.length,f=m+l.length;if(h&&m>o&&s.length+l.length<=o||!h&&!g&&f>o||(c=h?"":n(e[u+1],t)+(g?"":i),!h&&g&&f>o&&m+c.length>o))break;if(s+=S,!h&&!g&&m+c.length>=o){l=`${B}(${e.length-u-1})`;break}l=""}return`${s}${l}`}function Qe(e){return e.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?e:JSON.stringify(e).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}function q([e,t],n){return n.truncate-=2,typeof e=="string"?e=Qe(e):typeof e!="number"&&(e=`[${n.inspect(e,n)}]`),n.truncate-=e.length,t=n.inspect(t,n),`${e}: ${t}`}function et(e,t){const n=Object.keys(e).slice(e.length);if(!e.length&&!n.length)return"[]";t.truncate-=4;const i=k(e,t);t.truncate-=i.length;let r="";return n.length&&(r=k(n.map(o=>[o,e[o]]),t,q)),`[ ${i}${r?`, ${r}`:""} ]`}const tt=e=>typeof Buffer=="function"&&e instanceof Buffer?"Buffer":e[Symbol.toStringTag]?e[Symbol.toStringTag]:e.constructor.name;function C(e,t){const n=tt(e);t.truncate-=n.length+4;const i=Object.keys(e).slice(e.length);if(!e.length&&!i.length)return`${n}[]`;let r="";for(let s=0;s<e.length;s++){const c=`${t.stylize(j(e[s],t.truncate),"number")}${s===e.length-1?"":", "}`;if(t.truncate-=c.length,e[s]!==e.length&&t.truncate<=3){r+=`${B}(${e.length-e[s]+1})`;break}r+=c}let o="";return i.length&&(o=k(i.map(s=>[s,e[s]]),t,q)),`${n}[ ${r}${o?`, ${o}`:""} ]`}function nt(e,t){const n=e.toJSON();if(n===null)return"Invalid Date";const i=n.split("T"),r=i[0];return t.stylize(`${r}T${j(i[1],t.truncate-r.length-1)}`,"date")}function ue(e,t){const n=e[Symbol.toStringTag]||"Function",i=e.name;return i?t.stylize(`[${n} ${j(i,t.truncate-11)}]`,"special"):t.stylize(`[${n}]`,"special")}function rt([e,t],n){return n.truncate-=4,e=n.inspect(e,n),n.truncate-=e.length,t=n.inspect(t,n),`${e} => ${t}`}function it(e){const t=[];return e.forEach((n,i)=>{t.push([i,n])}),t}function st(e,t){return e.size===0?"Map{}":(t.truncate-=7,`Map{ ${k(it(e),t,rt)} }`)}const ot=Number.isNaN||(e=>e!==e);function fe(e,t){return ot(e)?t.stylize("NaN","number"):e===1/0?t.stylize("Infinity","number"):e===-1/0?t.stylize("-Infinity","number"):e===0?t.stylize(1/e===1/0?"+0":"-0","number"):t.stylize(j(String(e),t.truncate),"number")}function he(e,t){let n=j(e.toString(),t.truncate-1);return n!==B&&(n+="n"),t.stylize(n,"bigint")}function ct(e,t){const n=e.toString().split("/")[2],i=t.truncate-(2+n.length),r=e.source;return t.stylize(`/${j(r,i)}/${n}`,"regexp")}function lt(e){const t=[];return e.forEach(n=>{t.push(n)}),t}function at(e,t){return e.size===0?"Set{}":(t.truncate-=7,`Set{ ${k(lt(e),t)} }`)}const de=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),ut={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},ft=16;function ht(e){return ut[e]||`\\u${`0000${e.charCodeAt(0).toString(ft)}`.slice(-4)}`}function ge(e,t){return de.test(e)&&(e=e.replace(de,ht)),t.stylize(`'${j(e,t.truncate-2)}'`,"string")}function pe(e){return"description"in Symbol.prototype?e.description?`Symbol(${e.description})`:"Symbol()":e.toString()}let _e=()=>"Promise{…}";try{const{getPromiseDetails:e,kPending:t,kRejected:n}=process.binding("util");Array.isArray(e(Promise.resolve()))&&(_e=(i,r)=>{const[o,s]=e(i);return o===t?"Promise{<pending>}":`Promise${o===n?"!":""}{${r.inspect(s,r)}}`})}catch{}function V(e,t){const n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[];if(n.length===0&&i.length===0)return"{}";if(t.truncate-=4,t.seen=t.seen||[],t.seen.includes(e))return"[Circular]";t.seen.push(e);const r=k(n.map(c=>[c,e[c]]),t,q),o=k(i.map(c=>[c,e[c]]),t,q);t.seen.pop();let s="";return r&&o&&(s=", "),`{ ${r}${s}${o} }`}const U=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function dt(e,t){let n="";return U&&U in e&&(n=e[U]),n=n||e.constructor.name,(!n||n==="_class")&&(n="<Anonymous Class>"),t.truncate-=n.length,`${n}${V(e,t)}`}function gt(e,t){return e.length===0?"Arguments[]":(t.truncate-=13,`Arguments[ ${k(e,t)} ]`)}const pt=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function mt(e,t){const n=Object.getOwnPropertyNames(e).filter(s=>pt.indexOf(s)===-1),i=e.name;t.truncate-=i.length;let r="";if(typeof e.message=="string"?r=j(e.message,t.truncate):n.unshift("message"),r=r?`: ${r}`:"",t.truncate-=r.length+5,t.seen=t.seen||[],t.seen.includes(e))return"[Circular]";t.seen.push(e);const o=k(n.map(s=>[s,e[s]]),t,q);return`${i}${r}${o?` { ${o} }`:""}`}function yt([e,t],n){return n.truncate-=3,t?`${n.stylize(String(e),"yellow")}=${n.stylize(`"${t}"`,"string")}`:`${n.stylize(String(e),"yellow")}`}function ee(e,t){return k(e,t,Ee,`
`)}function Ee(e,t){const n=e.getAttributeNames(),i=e.tagName.toLowerCase(),r=t.stylize(`<${i}`,"special"),o=t.stylize(">","special"),s=t.stylize(`</${i}>`,"special");t.truncate-=i.length*2+5;let c="";n.length>0&&(c+=" ",c+=k(n.map(h=>[h,e.getAttribute(h)]),t,yt," ")),t.truncate-=c.length;const l=t.truncate;let u=ee(e.children,t);return u&&u.length>l&&(u=`${B}(${e.children.length})`),`${r}${c}${o}${u}${s}`}const bt=typeof Symbol=="function"&&typeof Symbol.for=="function",G=bt?Symbol.for("chai/inspect"):"@@chai/inspect";let M=!1;try{const e=require("util");M=e.inspect?e.inspect.custom:!1}catch{M=!1}const me=new WeakMap,ye={},be={undefined:(e,t)=>t.stylize("undefined","undefined"),null:(e,t)=>t.stylize("null","null"),boolean:(e,t)=>t.stylize(String(e),"boolean"),Boolean:(e,t)=>t.stylize(String(e),"boolean"),number:fe,Number:fe,bigint:he,BigInt:he,string:ge,String:ge,function:ue,Function:ue,symbol:pe,Symbol:pe,Array:et,Date:nt,Map:st,Set:at,RegExp:ct,Promise:_e,WeakSet:(e,t)=>t.stylize("WeakSet{…}","special"),WeakMap:(e,t)=>t.stylize("WeakMap{…}","special"),Arguments:gt,Int8Array:C,Uint8Array:C,Uint8ClampedArray:C,Int16Array:C,Uint16Array:C,Int32Array:C,Uint32Array:C,Float32Array:C,Float64Array:C,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:mt,HTMLCollection:ee,NodeList:ee},St=(e,t,n)=>G in e&&typeof e[G]=="function"?e[G](t):M&&M in e&&typeof e[M]=="function"?e[M](t.depth,t):"inspect"in e&&typeof e.inspect=="function"?e.inspect(t.depth,t):"constructor"in e&&me.has(e.constructor)?me.get(e.constructor)(e,t):ye[n]?ye[n](e,t):"",It=Object.prototype.toString;function te(e,t={}){const n=Ze(t,te),{customInspect:i}=n;let r=e===null?"null":typeof e;if(r==="object"&&(r=It.call(e).slice(8,-1)),r in be)return be[r](e,n);if(i&&e){const s=St(e,n,r);if(s)return typeof s=="string"?s:te(s,n)}const o=e?Object.getPrototypeOf(e):!1;return o===Object.prototype||o===null?V(e,n):e&&typeof HTMLElement=="function"&&e instanceof HTMLElement?Ee(e,n):"constructor"in e?e.constructor!==Object?dt(e,n):V(e,n):e===Object(e)?V(e,n):n.stylize(String(e),r)}const wt=/%[sdjifoOc%]/g;function xt(...e){if(typeof e[0]!="string"){const o=[];for(let s=0;s<e.length;s++)o.push(L(e[s],{depth:0,colors:!1}));return o.join(" ")}const t=e.length;let n=1;const i=e[0];let r=String(i).replace(wt,o=>{if(o==="%%")return"%";if(n>=t)return o;switch(o){case"%s":{const s=e[n++];return typeof s=="bigint"?`${s.toString()}n`:typeof s=="number"&&s===0&&1/s<0?"-0":typeof s=="object"&&s!==null?typeof s.toString=="function"&&s.toString!==Object.prototype.toString?s.toString():L(s,{depth:0,colors:!1}):String(s)}case"%d":{const s=e[n++];return typeof s=="bigint"?`${s.toString()}n`:Number(s).toString()}case"%i":{const s=e[n++];return typeof s=="bigint"?`${s.toString()}n`:Number.parseInt(String(s)).toString()}case"%f":return Number.parseFloat(String(e[n++])).toString();case"%o":return L(e[n++],{showHidden:!0,showProxy:!0});case"%O":return L(e[n++]);case"%c":return n++,"";case"%j":try{return JSON.stringify(e[n++])}catch(s){const c=s.message;if(c.includes("circular structure")||c.includes("cyclic structures")||c.includes("cyclic object"))return"[Circular]";throw s}default:return o}});for(let o=e[n];n<t;o=e[++n])o===null||typeof o!="object"?r+=` ${o}`:r+=` ${L(o)}`;return r}function L(e,t={}){return t.truncate===0&&(t.truncate=Number.POSITIVE_INFINITY),te(e,t)}function Tt(e,t={}){typeof t.truncate>"u"&&(t.truncate=40);const n=L(e,t),i=Object.prototype.toString.call(e);if(t.truncate&&n.length>=t.truncate)if(i==="[object Function]"){const r=e;return r.name?`[Function: ${r.name}]`:"[Function]"}else{if(i==="[object Array]")return`[ Array(${e.length}) ]`;if(i==="[object Object]"){const r=Object.keys(e);return`{ Object (${r.length>2?`${r.splice(0,2).join(", ")}, ...`:r.join(", ")}) }`}else return n}return n}function Ae(e){return e==null&&(e=[]),Array.isArray(e)?e:[e]}function Ce(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}function vt(){}function $t(e,t,n=void 0){const i=t.replace(/\[(\d+)\]/g,".$1").split(".");let r=e;for(const o of i)if(r=new Object(r)[o],r===void 0)return n;return r}function Se(){let e=null,t=null;const n=new Promise((i,r)=>{e=i,t=r});return n.resolve=e,n.reject=t,n}function kt(e){if(!Number.isNaN(e))return!1;const t=new Float64Array(1);return t[0]=e,new Uint32Array(t.buffer)[1]>>>31===1}var Z,Ie;function _t(){if(Ie)return Z;Ie=1;var e,t,n,i,r,o,s,c,l,u,h,g,d,S,m,f,b,w,v;return d=/\/(?![*\/])(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\\]).|\\.)*(\/[$_\u200C\u200D\p{ID_Continue}]*|\\)?/yu,g=/--|\+\+|=>|\.{3}|\??\.(?!\d)|(?:&&|\|\||\?\?|[+\-%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2}|\/(?![\/*]))=?|[?~,:;[\](){}]/y,e=/(\x23?)(?=[$_\p{ID_Start}\\])(?:[$_\u200C\u200D\p{ID_Continue}]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+/yu,m=/(['"])(?:(?!\1)[^\\\n\r]|\\(?:\r\n|[^]))*(\1)?/y,h=/(?:0[xX][\da-fA-F](?:_?[\da-fA-F])*|0[oO][0-7](?:_?[0-7])*|0[bB][01](?:_?[01])*)n?|0n|[1-9](?:_?\d)*n|(?:(?:0(?!\d)|0\d*[89]\d*|[1-9](?:_?\d)*)(?:\.(?:\d(?:_?\d)*)?)?|\.\d(?:_?\d)*)(?:[eE][+-]?\d(?:_?\d)*)?|0[0-7]+/y,f=/[`}](?:[^`\\$]|\\[^]|\$(?!\{))*(`|\$\{)?/y,v=/[\t\v\f\ufeff\p{Zs}]+/yu,c=/\r?\n|[\r\u2028\u2029]/y,l=/\/\*(?:[^*]|\*(?!\/))*(\*\/)?/y,S=/\/\/.*/y,n=/[<>.:={}]|\/(?![\/*])/y,t=/[$_\p{ID_Start}][$_\u200C\u200D\p{ID_Continue}-]*/yu,i=/(['"])(?:(?!\1)[^])*(\1)?/y,r=/[^<>{}]+/y,w=/^(?:[\/+-]|\.{3}|\?(?:InterpolationIn(?:JSX|Template)|NoLineTerminatorHere|NonExpressionParenEnd|UnaryIncDec))?$|[{}([,;<>=*%&|^!~?:]$/,b=/^(?:=>|[;\]){}]|else|\?(?:NoLineTerminatorHere|NonExpressionParenEnd))?$/,o=/^(?:await|case|default|delete|do|else|instanceof|new|return|throw|typeof|void|yield)$/,s=/^(?:return|throw|yield)$/,u=RegExp(c.source),Z=function*(x,{jsx:J=!1}={}){var _,R,X,p,y,ce,a,A,le,$,z,I,W,T;for({length:ce}=x,p=0,y="",T=[{tag:"JS"}],_=[],z=0,I=!1;p<ce;){switch(A=T[T.length-1],A.tag){case"JS":case"JSNonExpressionParen":case"InterpolationInTemplate":case"InterpolationInJSX":if(x[p]==="/"&&(w.test(y)||o.test(y))&&(d.lastIndex=p,a=d.exec(x))){p=d.lastIndex,y=a[0],I=!0,yield{type:"RegularExpressionLiteral",value:a[0],closed:a[1]!==void 0&&a[1]!=="\\"};continue}if(g.lastIndex=p,a=g.exec(x)){switch(W=a[0],le=g.lastIndex,$=W,W){case"(":y==="?NonExpressionParenKeyword"&&T.push({tag:"JSNonExpressionParen",nesting:z}),z++,I=!1;break;case")":z--,I=!0,A.tag==="JSNonExpressionParen"&&z===A.nesting&&(T.pop(),$="?NonExpressionParenEnd",I=!1);break;case"{":g.lastIndex=0,X=!b.test(y)&&(w.test(y)||o.test(y)),_.push(X),I=!1;break;case"}":switch(A.tag){case"InterpolationInTemplate":if(_.length===A.nesting){f.lastIndex=p,a=f.exec(x),p=f.lastIndex,y=a[0],a[1]==="${"?(y="?InterpolationInTemplate",I=!1,yield{type:"TemplateMiddle",value:a[0]}):(T.pop(),I=!0,yield{type:"TemplateTail",value:a[0],closed:a[1]==="`"});continue}break;case"InterpolationInJSX":if(_.length===A.nesting){T.pop(),p+=1,y="}",yield{type:"JSXPunctuator",value:"}"};continue}}I=_.pop(),$=I?"?ExpressionBraceEnd":"}";break;case"]":I=!0;break;case"++":case"--":$=I?"?PostfixIncDec":"?UnaryIncDec";break;case"<":if(J&&(w.test(y)||o.test(y))){T.push({tag:"JSXTag"}),p+=1,y="<",yield{type:"JSXPunctuator",value:W};continue}I=!1;break;default:I=!1}p=le,y=$,yield{type:"Punctuator",value:W};continue}if(e.lastIndex=p,a=e.exec(x)){switch(p=e.lastIndex,$=a[0],a[0]){case"for":case"if":case"while":case"with":y!=="."&&y!=="?."&&($="?NonExpressionParenKeyword")}y=$,I=!o.test(a[0]),yield{type:a[1]==="#"?"PrivateIdentifier":"IdentifierName",value:a[0]};continue}if(m.lastIndex=p,a=m.exec(x)){p=m.lastIndex,y=a[0],I=!0,yield{type:"StringLiteral",value:a[0],closed:a[2]!==void 0};continue}if(h.lastIndex=p,a=h.exec(x)){p=h.lastIndex,y=a[0],I=!0,yield{type:"NumericLiteral",value:a[0]};continue}if(f.lastIndex=p,a=f.exec(x)){p=f.lastIndex,y=a[0],a[1]==="${"?(y="?InterpolationInTemplate",T.push({tag:"InterpolationInTemplate",nesting:_.length}),I=!1,yield{type:"TemplateHead",value:a[0]}):(I=!0,yield{type:"NoSubstitutionTemplate",value:a[0],closed:a[1]==="`"});continue}break;case"JSXTag":case"JSXTagEnd":if(n.lastIndex=p,a=n.exec(x)){switch(p=n.lastIndex,$=a[0],a[0]){case"<":T.push({tag:"JSXTag"});break;case">":T.pop(),y==="/"||A.tag==="JSXTagEnd"?($="?JSX",I=!0):T.push({tag:"JSXChildren"});break;case"{":T.push({tag:"InterpolationInJSX",nesting:_.length}),$="?InterpolationInJSX",I=!1;break;case"/":y==="<"&&(T.pop(),T[T.length-1].tag==="JSXChildren"&&T.pop(),T.push({tag:"JSXTagEnd"}))}y=$,yield{type:"JSXPunctuator",value:a[0]};continue}if(t.lastIndex=p,a=t.exec(x)){p=t.lastIndex,y=a[0],yield{type:"JSXIdentifier",value:a[0]};continue}if(i.lastIndex=p,a=i.exec(x)){p=i.lastIndex,y=a[0],yield{type:"JSXString",value:a[0],closed:a[2]!==void 0};continue}break;case"JSXChildren":if(r.lastIndex=p,a=r.exec(x)){p=r.lastIndex,y=a[0],yield{type:"JSXText",value:a[0]};continue}switch(x[p]){case"<":T.push({tag:"JSXTag"}),p++,y="<",yield{type:"JSXPunctuator",value:"<"};continue;case"{":T.push({tag:"InterpolationInJSX",nesting:_.length}),p++,y="?InterpolationInJSX",I=!1,yield{type:"JSXPunctuator",value:"{"};continue}}if(v.lastIndex=p,a=v.exec(x)){p=v.lastIndex,yield{type:"WhiteSpace",value:a[0]};continue}if(c.lastIndex=p,a=c.exec(x)){p=c.lastIndex,I=!1,s.test(y)&&(y="?NoLineTerminatorHere"),yield{type:"LineTerminatorSequence",value:a[0]};continue}if(l.lastIndex=p,a=l.exec(x)){p=l.lastIndex,u.test(a[0])&&(I=!1,s.test(y)&&(y="?NoLineTerminatorHere")),yield{type:"MultiLineComment",value:a[0],closed:a[1]!==void 0};continue}if(S.lastIndex=p,a=S.exec(x)){p=S.lastIndex,I=!1,yield{type:"SingleLineComment",value:a[0]};continue}R=String.fromCodePoint(x.codePointAt(p)),p+=R.length,y=R,I=!1,yield{type:A.tag.startsWith("JSX")?"JSXInvalid":"Invalid",value:R}}},Z}_t();var Ne={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"]};new Set(Ne.keyword);new Set(Ne.strict);const we=Symbol("vitest:SAFE_TIMERS");function Et(){const{setTimeout:e,setInterval:t,clearInterval:n,clearTimeout:i,setImmediate:r,clearImmediate:o,queueMicrotask:s}=globalThis[we]||globalThis,{nextTick:c}=globalThis[we]||globalThis.process||{nextTick:l=>l()};return{nextTick:c,setTimeout:e,setInterval:t,clearInterval:n,clearTimeout:i,setImmediate:r,clearImmediate:o,queueMicrotask:s}}const xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",At=new Uint8Array(64),Ct=new Uint8Array(128);for(let e=0;e<xe.length;e++){const t=xe.charCodeAt(e);At[e]=t,Ct[t]=e}var Te;(function(e){e[e.Empty=1]="Empty",e[e.Hash=2]="Hash",e[e.Query=3]="Query",e[e.RelativePath=4]="RelativePath",e[e.AbsolutePath=5]="AbsolutePath",e[e.SchemeRelative=6]="SchemeRelative",e[e.Absolute=7]="Absolute"})(Te||(Te={}));const Nt=/^[A-Za-z]:\//;function Pt(e=""){return e&&e.replace(/\\/g,"/").replace(Nt,t=>t.toUpperCase())}const jt=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/;function Ft(){return typeof process<"u"&&typeof process.cwd=="function"?process.cwd().replace(/\\/g,"/"):"/"}const Rt=function(...e){e=e.map(i=>Pt(i));let t="",n=!1;for(let i=e.length-1;i>=-1&&!n;i--){const r=i>=0?e[i]:Ft();!r||r.length===0||(t=`${r}/${t}`,n=ve(r))}return t=Lt(t,!n),n&&!ve(t)?`/${t}`:t.length>0?t:"."};function Lt(e,t){let n="",i=0,r=-1,o=0,s=null;for(let c=0;c<=e.length;++c){if(c<e.length)s=e[c];else{if(s==="/")break;s="/"}if(s==="/"){if(!(r===c-1||o===1))if(o===2){if(n.length<2||i!==2||n[n.length-1]!=="."||n[n.length-2]!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",i=0):(n=n.slice(0,l),i=n.length-1-n.lastIndexOf("/")),r=c,o=0;continue}else if(n.length>0){n="",i=0,r=c,o=0;continue}}t&&(n+=n.length>0?"/..":"..",i=2)}else n.length>0?n+=`/${e.slice(r+1,c)}`:n=e.slice(r+1,c),i=c-r-1;r=c,o=0}else s==="."&&o!==-1?++o:o=-1}return n}const ve=function(e){return jt.test(e)},Pe=/^\s*at .*(?:\S:\d+|\(native\))/m,Mt=/^(?:eval@)?(?:\[native code\])?$/;function je(e){if(!e.includes(":"))return[e];const n=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/^\(|\)$/g,""));if(!n)return[e];let i=n[1];if(i.startsWith("async ")&&(i=i.slice(6)),i.startsWith("http:")||i.startsWith("https:")){const r=new URL(i);r.searchParams.delete("import"),r.searchParams.delete("browserv"),i=r.pathname+r.hash+r.search}if(i.startsWith("/@fs/")){const r=/^\/@fs\/[a-zA-Z]:\//.test(i);i=i.slice(r?5:4)}return[i,n[2]||void 0,n[3]||void 0]}function Ot(e){let t=e.trim();if(Mt.test(t)||(t.includes(" > eval")&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),!t.includes("@")&&!t.includes(":")))return null;const n=/((.*".+"[^@]*)?[^@]*)(@)/,i=t.match(n),r=i&&i[1]?i[1]:void 0,[o,s,c]=je(t.replace(n,""));return!o||!s||!c?null:{file:o,method:r||"",line:Number.parseInt(s),column:Number.parseInt(c)}}function Bt(e){const t=e.trim();return Pe.test(t)?Jt(t):Ot(t)}function Jt(e){let t=e.trim();if(!Pe.test(t))return null;t.includes("(eval ")&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));let n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,"");const i=n.match(/ (\(.+\)$)/);n=i?n.replace(i[0],""):n;const[r,o,s]=je(i?i[1]:n);let c=i&&n||"",l=r&&["eval","<anonymous>"].includes(r)?void 0:r;return!l||!o||!s?null:(c.startsWith("async ")&&(c=c.slice(6)),l.startsWith("file://")&&(l=l.slice(7)),l=l.startsWith("node:")||l.startsWith("internal:")?l:Rt(l),c&&(c=c.replace(/__vite_ssr_import_\d+__\./g,"")),{method:c,file:l,line:Number.parseInt(o),column:Number.parseInt(s)})}function ie(e,t){function n(r){const o=function(...s){return t.apply(r,s)};Object.assign(o,t),o.withContext=()=>o.bind(r),o.setContext=(s,c)=>{r[s]=c},o.mergeContext=s=>{Object.assign(r,s)};for(const s of e)Object.defineProperty(o,s,{get(){return n({...r,[s]:!0})}});return o}const i=n({});return i.fn=t,i}class Xt extends Error{constructor(n,i,r){super(n);K(this,"code","VITEST_PENDING");K(this,"taskId");this.message=n,this.note=r,this.taskId=i.id}}const $e=Date.now,N={currentSuite:null};function zt(e){var t;(t=N.currentSuite)==null||t.tasks.push(e)}async function Wt(e,t){const n=N.currentSuite;N.currentSuite=e,await t(),N.currentSuite=n}function ne(e,t,n=!1,i){if(t<=0||t===Number.POSITIVE_INFINITY)return e;const{setTimeout:r,clearTimeout:o}=Et();return function(...c){const l=$e();return new Promise((u,h)=>{var g;const d=r(()=>{o(d),S()},t);(g=d.unref)==null||g.call(d);function S(){h(qt(n,t,i))}function m(b){if(o(d),$e()-l>=t){S();return}u(b)}function f(b){o(d),h(b)}try{const b=e(...c);typeof b=="object"&&b!=null&&typeof b.then=="function"?b.then(m,f):m(b)}catch(b){f(b)}})}}function Dt(e,t){var n;const i=function(){throw new Error("done() callback is deprecated, use promise instead")};return i.task=e,i.skip=r=>{throw e.result??(e.result={state:"skip"}),e.result.pending=!0,new Xt("test is skipped; abort execution",e,r)},i.onTestFailed=(r,o)=>{e.onFailed||(e.onFailed=[]),e.onFailed.push(ne(r,o??t.config.hookTimeout,!0,new Error("STACK_TRACE_ERROR")))},i.onTestFinished=(r,o)=>{e.onFinished||(e.onFinished=[]),e.onFinished.push(ne(r,o??t.config.hookTimeout,!0,new Error("STACK_TRACE_ERROR")))},((n=t.extendTaskContext)==null?void 0:n.call(t,i))||i}function qt(e,t,n){const i=`${e?"Hook":"Test"} timed out in ${t}ms.
If this is a long-running ${e?"hook":"test"}, pass a timeout value as the last argument or configure it globally with "${e?"hookTimeout":"testTimeout"}".`,r=new Error(i);return n!=null&&n.stack&&(r.stack=n.stack.replace(r.message,n.message)),r}const Fe=new WeakMap,Re=new WeakMap,Le=new WeakMap;function Vt(e,t){Fe.set(e,t)}function mn(e){return Fe.get(e)}function Ht(e,t){Re.set(e,t)}function Kt(e){return Re.get(e)}function Ut(e,t){Le.set(e,t)}function Gt(e){return Le.get(e)}function Zt(e,t,n){const i=["auto","injected"],r=Object.entries(e).map(([o,s])=>{const c={value:s};if(Array.isArray(s)&&s.length>=2&&Ce(s[1])&&Object.keys(s[1]).some(l=>i.includes(l))){Object.assign(c,s[1]);const l=s[0];c.value=c.injected?n(o)??l:l}return c.prop=o,c.isFn=typeof c.value=="function",c});return Array.isArray(t.fixtures)?t.fixtures=t.fixtures.concat(r):t.fixtures=r,r.forEach(o=>{if(o.isFn){const s=Oe(o.value);s.length&&(o.deps=t.fixtures.filter(({prop:c})=>c!==o.prop&&s.includes(c)))}}),t}const Y=new Map,Q=new Map;function Yt(e,t){return n=>{const i=n||t;if(!i)return e({});const r=Kt(i);if(!(r!=null&&r.length))return e(i);const o=Oe(e),s=r.some(({auto:d})=>d);if(!o.length&&!s)return e(i);Y.get(i)||Y.set(i,new Map);const c=Y.get(i);Q.has(i)||Q.set(i,[]);const l=Q.get(i),u=r.filter(({prop:d,auto:S})=>S||o.includes(d)),h=Me(u);if(!h.length)return e(i);async function g(){for(const d of h){if(c.has(d))continue;const S=d.isFn?await Qt(d.value,i,l):d.value;i[d.prop]=S,c.set(d,S),l.unshift(()=>{c.delete(d)})}}return g().then(()=>e(i))}}async function Qt(e,t,n){const i=Se();let r=!1;const o=e(t,async s=>{r=!0,i.resolve(s);const c=Se();n.push(async()=>{c.resolve(),await o}),await c}).catch(s=>{if(!r){i.reject(s);return}throw s});return i}function Me(e,t=new Set,n=[]){return e.forEach(i=>{if(!n.includes(i)){if(!i.isFn||!i.deps){n.push(i);return}if(t.has(i))throw new Error(`Circular fixture dependency detected: ${i.prop} <- ${[...t].reverse().map(r=>r.prop).join(" <- ")}`);t.add(i),Me(i.deps,t,n),n.push(i),t.clear()}}),n}function Oe(e){let t=e.toString();/__async\(this, (?:null|arguments|\[[_0-9, ]*\]), function\*/.test(t)&&(t=t.split("__async(this,")[1]);const n=t.match(/[^(]*\(([^)]*)/);if(!n)return[];const i=ke(n[1]);if(!i.length)return[];let r=i[0];if("__VITEST_FIXTURE_INDEX__"in e&&(r=i[e.__VITEST_FIXTURE_INDEX__],!r))return[];if(!(r.startsWith("{")&&r.endsWith("}")))throw new Error(`The first argument inside a fixture must use object destructuring pattern, e.g. ({ test } => {}). Instead, received "${r}".`);const o=r.slice(1,-1).replace(/\s/g,""),s=ke(o).map(l=>l.replace(/:.*|=.*/g,"")),c=s.at(-1);if(c&&c.startsWith("..."))throw new Error(`Rest parameters are not supported in fixtures, received "${c}".`);return s}function ke(e){const t=[],n=[];let i=0;for(let o=0;o<e.length;o++)if(e[o]==="{"||e[o]==="[")n.push(e[o]==="{"?"}":"]");else if(e[o]===n[n.length-1])n.pop();else if(!n.length&&e[o]===","){const s=e.substring(i,o).trim();s&&t.push(s),i=o+1}const r=e.substring(i).trim();return r&&t.push(r),t}let en;function yn(){return en}const D=ln();oe(function(e,t,n){se().test.fn.call(this,P(e),t,n)});let F,Be,tn;function Je(e,t){if(!e)throw new Error(`Vitest failed to find ${t}. This is a bug in Vitest. Please, open an issue with reproduction.`)}function nn(){return tn}function rn(){return Je(F,"the runner"),F}function se(){const e=N.currentSuite||Be;return Je(e,"the current suite"),e}function sn(){return{beforeAll:[],afterAll:[],beforeEach:[],afterEach:[]}}function O(e,t){let n={},i=()=>{};if(typeof t=="object"){if(typeof e=="object")throw new TypeError("Cannot use two objects as arguments. Please provide options and a function callback in that order.");console.warn("Using an object as a third argument is deprecated. Vitest 4 will throw an error if the third argument is not a timeout number. Please use the second argument for options. See more at https://vitest.dev/guide/migration"),n=t}else typeof t=="number"?n={timeout:t}:typeof e=="object"&&(n=e);if(typeof e=="function"){if(typeof t=="function")throw new TypeError("Cannot use two functions as arguments. Please use the second argument for options.");i=e}else typeof t=="function"&&(i=t);return{options:n,handler:i}}function on(e,t=()=>{},n,i,r){const o=[];let s;g();const c=function(m="",f={}){var b;const w=(f==null?void 0:f.timeout)??F.config.testTimeout,v={id:"",name:m,suite:(b=N.currentSuite)==null?void 0:b.suite,each:f.each,fails:f.fails,context:void 0,type:"test",file:void 0,timeout:w,retry:f.retry??F.config.retry,repeats:f.repeats,mode:f.only?"only":f.skip?"skip":f.todo?"todo":"run",meta:f.meta??Object.create(null)},x=f.handler;(f.concurrent||!f.sequential&&F.config.sequence.concurrent)&&(v.concurrent=!0),v.shuffle=r==null?void 0:r.shuffle;const J=Dt(v,F);if(Object.defineProperty(v,"context",{value:J,enumerable:!1}),Ht(J,f.fixtures),x&&Vt(v,ne(cn(Yt(x,J),v),w)),F.config.includeTaskLocation){const _=Error.stackTraceLimit;Error.stackTraceLimit=15;const R=new Error("stacktrace").stack;Error.stackTraceLimit=_;const X=un(R,v.each??!1);X&&(v.location=X)}return o.push(v),v},l=oe(function(m,f,b){let{options:w,handler:v}=O(f,b);typeof r=="object"&&(w=Object.assign({},r,w)),w.concurrent=this.concurrent||!this.sequential&&(w==null?void 0:w.concurrent),w.sequential=this.sequential||!this.concurrent&&(w==null?void 0:w.sequential);const x=c(P(m),{...this,...w,handler:v});x.type="test"}),u={type:"collector",name:e,mode:n,suite:s,options:r,test:l,tasks:o,collect:S,task:c,clear:d,on:h};function h(m,...f){Gt(s)[m].push(...f)}function g(m){var f;typeof r=="number"&&(r={timeout:r}),s={id:"",type:"suite",name:e,suite:(f=N.currentSuite)==null?void 0:f.suite,mode:n,each:i,file:void 0,shuffle:r==null?void 0:r.shuffle,tasks:[],meta:Object.create(null),concurrent:r==null?void 0:r.concurrent},Ut(s,sn())}function d(){o.length=0,g()}async function S(m){if(!m)throw new TypeError("File is required to collect tasks.");t&&await Wt(u,()=>t(l));const f=[];for(const b of o)f.push(b.type==="collector"?await b.collect(m):b);return s.file=m,s.tasks=f,f.forEach(b=>{b.file=m}),s}return zt(u),u}function cn(e,t){return async(...n)=>{const i=await e(...n);if(t.promises){const o=(await Promise.allSettled(t.promises)).map(s=>s.status==="rejected"?s.reason:void 0).filter(Boolean);if(o.length)throw o}return i}}function ln(){function e(t,n,i){var r;const o=this.only?"only":this.skip?"skip":this.todo?"todo":"run",s=N.currentSuite||Be;let{options:c,handler:l}=O(n,i);const u=c.concurrent||this.concurrent||c.sequential===!1,h=c.sequential||this.sequential||c.concurrent===!1;c={...s==null?void 0:s.options,...c,shuffle:this.shuffle??c.shuffle??((r=s==null?void 0:s.options)==null?void 0:r.shuffle)??void 0};const g=u||c.concurrent&&!h,d=h||c.sequential&&!u;return c.concurrent=g&&!d,c.sequential=d&&!g,on(P(t),l,o,this.each,c)}return e.each=function(t,...n){const i=this.withContext();return this.setContext("each",!0),Array.isArray(t)&&n.length&&(t=H(t,n)),(r,o,s)=>{const c=P(r),l=t.every(Array.isArray),{options:u,handler:h}=O(o,s),g=typeof o=="function"&&typeof s=="object";t.forEach((d,S)=>{const m=Array.isArray(d)?d:[d];g?l?i(E(c,m,S),()=>h(...m),u):i(E(c,m,S),()=>h(d),u):l?i(E(c,m,S),u,()=>h(...m)):i(E(c,m,S),u,()=>h(d))}),this.setContext("each",void 0)}},e.for=function(t,...n){return Array.isArray(t)&&n.length&&(t=H(t,n)),(i,r,o)=>{const s=P(i),{options:c,handler:l}=O(r,o);t.forEach((u,h)=>{D(E(s,Ae(u),h),c,()=>l(u))})}},e.skipIf=t=>t?D.skip:D,e.runIf=t=>t?D:D.skip,ie(["concurrent","sequential","shuffle","skip","only","todo"],e)}function an(e,t){const n=e;n.each=function(r,...o){const s=this.withContext();return this.setContext("each",!0),Array.isArray(r)&&o.length&&(r=H(r,o)),(c,l,u)=>{const h=P(c),g=r.every(Array.isArray),{options:d,handler:S}=O(l,u),m=typeof l=="function"&&typeof u=="object";r.forEach((f,b)=>{const w=Array.isArray(f)?f:[f];m?g?s(E(h,w,b),()=>S(...w),d):s(E(h,w,b),()=>S(f),d):g?s(E(h,w,b),d,()=>S(...w)):s(E(h,w,b),d,()=>S(f))}),this.setContext("each",void 0)}},n.for=function(r,...o){const s=this.withContext();return Array.isArray(r)&&o.length&&(r=H(r,o)),(c,l,u)=>{const h=P(c),{options:g,handler:d}=O(l,u);r.forEach((S,m)=>{const f=b=>d(S,b);f.__VITEST_FIXTURE_INDEX__=1,f.toString=()=>d.toString(),s(E(h,Ae(S),m),g,f)})}},n.skipIf=function(r){return r?this.skip:this},n.runIf=function(r){return r?this:this.skip},n.extend=function(r){const o=Zt(r,t||{},s=>{var c,l;return(l=(c=rn()).injectValue)==null?void 0:l.call(c,s)});return oe(function(c,l,u){se().test.fn.call(this,P(c),l,u)},o)};const i=ie(["concurrent","sequential","skip","only","todo","fails"],n);return t&&i.mergeContext(t),i}function oe(e,t){return an(e,t)}function P(e){return typeof e=="string"?e:typeof e=="function"?e.name||"<anonymous>":String(e)}function E(e,t,n){e.includes("%#")&&(e=e.replace(/%%/g,"__vitest_escaped_%__").replace(/%#/g,`${n}`).replace(/__vitest_escaped_%__/g,"%%"));const i=e.split("%").length-1;e.includes("%f")&&(e.match(/%f/g)||[]).forEach((s,c)=>{if(kt(t[c])||Object.is(t[c],-0)){let l=0;e=e.replace(/%f/g,u=>(l++,l===c+1?"-%f":u))}});let r=xt(e,...t.slice(0,i));return Ce(t[0])&&(r=r.replace(/\$([$\w.]+)/g,(o,s)=>{var c,l;return Tt($t(t[0],s),{truncate:(l=(c=void 0)==null?void 0:c.chaiConfig)==null?void 0:l.truncateThreshold})})),r}function H(e,t){const n=e.join("").trim().replace(/ /g,"").split(`
`).map(r=>r.split("|"))[0],i=[];for(let r=0;r<Math.floor(t.length/n.length);r++){const o={};for(let s=0;s<n.length;s++)o[n[s]]=t[r*n.length+s];i.push(o)}return i}function un(e,t){const n=e.split(`
`).slice(1);for(const i of n){const r=Bt(i);if(r&&r.file===nn())return{line:r.line,column:t?r.column+1:r.column}}}globalThis.performance?globalThis.performance.now.bind(globalThis.performance):Date.now;globalThis.performance?globalThis.performance.now.bind(globalThis.performance):Date.now;const fn="__vitest_worker__";function hn(){const e=globalThis[fn];if(!e){const t=`Vitest failed to access its internal state.

One of the following is possible:
- "vitest" is imported directly without running "vitest" command
- "vitest" is imported inside "globalSetup" (to fix this, use "setupFiles" instead, because "globalSetup" runs in a different context)
- Otherwise, it might be a Vitest bug. Please report it to https://github.com/vitest-dev/vitest/issues
`;throw new Error(t)}return e}const Xe=new WeakMap,ze=new WeakMap;function bn(e){return ze.get(e)}function Sn(e){return Xe.get(e)}dn(function(e,t=vt,n={}){if(hn().config.mode!=="benchmark")throw new Error("`bench()` is only available in benchmark mode.");const i=se().task(gn(e),{...this,meta:{benchmark:!0}});Xe.set(i,t),ze.set(i,n)});function dn(e){const t=ie(["skip","only","todo"],e);return t.skipIf=n=>n?t.skip:t,t.runIf=n=>n?t:t.skip,t}function gn(e){return typeof e=="string"?e:typeof e=="function"?e.name||"<anonymous>":String(e)}export{ie as createChainable,an as createTaskCollector,Sn as getBenchFn,bn as getBenchOptions,se as getCurrentSuite,yn as getCurrentTest,mn as getFn,Gt as getHooks,Vt as setFn,Ut as setHooks};
